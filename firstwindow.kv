# First Window
<FirstWindow>:
    name: "first"
    listexpenses: listexpenses
    user_message_access: user_message_access
    api_key_ai: api_key_ai
    MDBoxLayout:
        size_hint: 1, .95
        orientation: 'vertical'
        pos_hint: {'center_x': .5, 'center_y': .5}
        padding: [0, 0, 0, 10]
        MDBoxLayout:
            size_hint: .9, .1
            pos_hint: {'center_x': .5}
            MDTextField:
                id: api_key_ai
                mode: "rectangle"
                font_style: 'Caption'
                hint_text: "    API Key    "
                color_mode: 'custom'
                line_color_focus: 0, 0, 0, 1
                line_color_normal: 0, 0, 0, 1    
        MDBoxLayout:
            size_hint_y: .1
            MDLabel:
                text: 'Chatbot AI'
                font_name: 'Poppins/Poppins-Medium'
                halign: 'center'
        MDBoxLayout:
            size_hint_y: .7
            ScrollView:
                scroll_y: 0

                MDList:
                    id: listexpenses
                    spacing: 10
                    padding: 0
            
        MDBoxLayout:
            size_hint_y: .1
            SendMessage:

                id: user_message_access


# Send Message TextField and Button

<SendMessage>:
    orientation: 'horizontal'
    padding: 10
    adaptive_height: True
    spacing: 5
    md_bg_color: 'white'
    MDTextField:
        id: user_message
        line_color_focus: [23/255, 195/255, 206/255, 1]
        font_name: 'Poppins/Poppins-Regular'
        mode: 'fill'
        text_color_focus: [23/255, 195/255, 206/255, 1]
        multiline: True
        hint_text_color: [23/255, 195/255, 206/255, 1]
        hint_text: 'Message'
        text_color:  [23/255, 195/255, 206/255, 1]
    MDIconButton:
        canvas.before:
            Color:
                rgba: [23/255, 195/255, 206/255, 1]
            RoundedRectangle:
                pos: self.pos
                size: self.size
                radius: [dp(10), dp(10)] 
        icon: 'send'
        ripple_scale: 0
        theme_icon_color: 'Custom'
        icon_color: 'white'
        pos_hint: {'center_x': .5}
        on_release:
            root.validate_api()

# Chats

<Chats>:
    adaptive_height: True
    padding: [10, 0, 10, 0]

    MDBoxLayout:
        padding: 20
        adaptive_height: True
        orientation: 'vertical'
        radius: [1, 20, 20, 20]
        spacing: 10
        md_bg_color: root.background_color
        MDBoxLayout:
            spacing: 10
            adaptive_height: True
            MDIconButton:
                canvas.before:
                    Color:
                        rgba: root.identity_bg
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [dp(10), dp(10)] 
                icon: root.icon
                ripple_scale: 0
                theme_icon_color: 'Custom'
                icon_color: root.identity_color
                pos_hint: {'center_x': .5}
            MDLabel:
                text: f'{root.identity}'
                theme_text_color: 'Custom'
                text_color: root.id_text_color
                font_name: 'Poppins/Poppins-Medium'
        MDBoxLayout:
            orientation: 'vertical'
            adaptive_height: True
            CustomLabel:
                adaptive_height: True
                font_name: 'Poppins/Poppins-Regular'
                text_size: self.width, None
                id: chats
                font_size: '14sp'
                theme_text_color: 'Custom'
                text_color: root.context_color
                text: root.text
